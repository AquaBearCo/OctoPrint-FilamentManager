<div id="settings_plugin_filamentmanager_profiledialog" class="modal hide fade">

    <div class="modal-header">
        <a href="#" class="close" data-dismiss="modal" aria-hidden="true">&times;</a>
        <h3>{{ _('Filament Profiles') }} <i class="icon-spinner icon-spin" data-bind="visible: requestInProgress()"></i></h3>
    </div>

    <div class="modal-body">

        <!-- profile selection -->

        <div class="controls settings_plugin_filamentmanager_profiledialog_select">
            <select data-bind="options: profileEditor.profiles, optionsText: function(item) { return item.material + ' (' + item.vendor + ')'; }, optionsValue: function(item) { return item.id; }, optionsCaption: '{{ _('--- New Profile ---') }}', value: profileEditor.selectedProfile"></select>
            <button class="btn btn-small btn-success" title="{{ _('New') }}" data-bind="click: function() { profileEditor.fromProfileData(); }"><span class="icon-plus"></span></button>
            <button class="btn btn-small btn-danger" title="{{ _('Delete') }}" data-bind="disable: profileEditor.isNew() || requestInProgress(), click: function() { removeProfile(profileEditor.toProfileData()); }"><span class="icon-minus"></span></button>
            <button class="btn btn-small btn-primary pull-right" title="{{ _('Save profile') }}" data-bind="disable: requestInProgress() || profileEditor.materialInvalid() || profileEditor.vendorInvalid(), click: function() { saveProfile(profileEditor.toProfileData()); }">{{ _('Save') }}</button>
        </div>

        <legend></legend>

        <form class="form-horizontal">

            <!-- vendor -->

            <div class="control-group" data-bind="css: {error: profileEditor.vendorInvalid()}">
                <label class="control-label">{{ _('Vendor') }}</label>
                <div class="controls">
                    <input type="text" data-bind="value: profileEditor.vendor, valueUpdate: 'afterkeydown'">
                    <span data-bind="visible: profileEditor.vendorInvalid()">
                        <br><span class="help-inline">{{ _("Vendor must be set") }}</span>
                    </span>
                </div>
            </div>

            <!-- material -->

            <div class="control-group" data-bind="css: {error: profileEditor.materialInvalid()}">
                <label class="control-label">{{ _('Material') }}</label>
                <div class="controls">
                    <input type="text" data-bind="value: profileEditor.material, valueUpdate: 'afterkeydown'">
                    <span data-bind="visible: profileEditor.materialInvalid()">
                        <br><span class="help-inline">{{ _("Material must be set") }}</span>
                    </span>
                </div>
            </div>

            <!-- density -->

            <div class="control-group">
                <label class="control-label">{{ _('Density') }}</label>
                <div class="controls">
                    <div class="input-append">
                        <input type="number" step="0.01" min="0" class="input-mini text-right" data-bind="value: profileEditor.density">
                        <span class="add-on">g/cm<sup>3</sup></span>
                    </div>
                </div>
            </div>

            <!-- diameter -->

            <div class="control-group">
                <label class="control-label">{{ _('Diameter') }}</label>
                <div class="controls">
                    <div class="input-append">
                        <input type="number" step="0.01" min="0" class="input-mini text-right" data-bind="value: profileEditor.diameter">
                        <span class="add-on">mm</span>
                    </div>
                </div>
            </div>

        </form>
    </div>

    <div class="modal-footer">
        <button class="btn" data-dismiss="modal" aria-hidden="true">{{ _('Close') }}</button>
    </div>

</div>
